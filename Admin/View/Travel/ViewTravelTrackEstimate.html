<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>查看出行轨迹</title>


    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/simple-line-icons/simple-line-icons.min.css"
          rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}//assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css"
          rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/css/components.min.css" rel="stylesheet" id="style_components"
          type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css"/>

    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css"
          rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css"
          rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css"
          rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"
          rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap-toastr/toastr.min.css" rel="stylesheet"
          type="text/css"/>

    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="{$smarty.const.PUBLIC_URL}/assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet"
          type="text/css" id="style_color"/>
    <link href="{$smarty.const.PUBLIC_URL}/assets/layouts/layout/css/custom.min.css" rel="stylesheet" type="text/css"/>


    <style>
        td {
            height: 30px;
            line-height: 30px;
            padding: 0 5px;
        }
    </style>

</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white" style="background: #FFFFFF;">
<div class="page-wrapper">
    <div class="page-content">
        <div class="dispatchRight" id="dispatchRight" style="width: 100%; height: 700px;">

        </div>
    </div>
</div>


</body>
<script src="{$smarty.const.PUBLIC_URL}/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="{$smarty.const.PUBLIC_URL}/assets/global/plugins/bootstrap/js/bootstrap.min.js"
        type="text/javascript"></script>

<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=tgXj9S1lLWl0ie7vGx3oYNzQkM3rLbO0"></script>

<script>

    $(function () {
        //驾车路线规划
        var map = new BMap.Map("dispatchRight");
        var from_place = "{$travel['from_place']}";   //起点
        var to_place = "{$travel['to_place']}";     //终点
        map.centerAndZoom(new BMap.Point(112.981797,28.23219), 12);
        map.enableScrollWheelZoom(true);
        var transit = new BMap.DrivingRoute( map , { renderOptions: { map:map }});
        transit.search(from_place, to_place);


        // $.when(getPlace("{$travel['from_place_location']}","{$travel['from_place']}"), getPlace("{$travel['to_place_location']}","{$travel['to_place']}"))
        //     .then(function(data1, data2){
        //         var map = new BMap.Map("dispatchRight");
        //         var point = new BMap.Point(112.981797,28.23219);
        //         map.centerAndZoom(point, 12);
        //         map.enableScrollWheelZoom(true);
        //         //通过两个固定地点获取 驾车路线规划
        //         var transit = new BMap.DrivingRoute( map , { renderOptions : { map : map }});
        //         transit.search(data1, data2);
        //     });
    });

    //通过经纬度获取固定地点
    // function getPlace(locations,address){
    //     location_arr = locations.split(',');
    //     var def = $.Deferred();
    //     var myGeo = new BMap.Geocoder();
    //     myGeo.getLocation(new BMap.Point(location_arr[0],location_arr[1]), function (result) {
    //         res = result ? result.address : address;
    //         def.resolve(res);
    //     });
    //     return def.promise();
    // }

</script>
</html>


